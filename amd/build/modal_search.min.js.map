{"version":3,"sources":["../src/modal_search.js"],"names":["define","exports","$","ajax","ModalFactory","ModalEvents","Notification","Modal","CustomEvents","ModalRegistry","Str","ModalBook","ModalBookHandler","ModalVideo","fn","serializeAssoc","data","each","serializeArray","key","obj","a","name","match","subName","subKey","length","isArray","push","value","SELECTORS","SEARCH_TEXTBOX","START_SEARCH","START_SEARCH_CLEAR","CANCEL_BUTTON","CONTENT_BLOCK","BREADCRUMBS","CONTENT_NAME","TRIGGER_BOOK","ADD_BOOK","CATEGORY_BUTTON","CATEGORY_BLOCK","BOOK_PAGINATION","START_PAGE_CLASS","END_PAGE_CLASS","PROGRESS","BOOK_FILTER","EDU_FILTER","SEARCH_FORM","OUTER_SELECTORS","PAGE_NUMBER_FIELD","NAME_FIELD","CONTENT_FIELD","LIMIT_ON_PAGE","ModalSearch","root","call","getBody","find","get_string","then","string","exception","message","TYPE","prototype","Object","create","constructor","breadcrumbs","registerEventListeners","submitFunction","e","preventDefault","stopPropagation","id","attr","args","searchParam","target","form","page","limit","catId","toggleClass","getAjaxCall","getSearchResult","resetPagination","on","nameFieldFill","getModal","events","activate","bind","val","trigger","disabledEnterSubmit","keyCode","setPagination","currentTarget","hasClass","maxPage","parseInt","prevPage","closest","nextPage","currentPage","removeClass","addClass","text","strings","disabledKeyUp","getCategoryTree","categoryId","printCategories","console","log","response","tocName","pg","replace","padTo2Digits","num","toString","padStart","formatDate","date","getDate","getMonth","getFullYear","join","empty","Math","ceil","body","total","items","number","item","descriptionBlock","description","append","cover","biblioRecord","Date","author","title","init","contentName","biblioRecordField","coverField","resourceNameField","bookTitle","bookAuthor","bookCover","bookBiblioRecord","siblings","resetModal","available","hasChild","parent_id","click","clearCurrentCrumb","parentId","printBreadcrumbs","prepend","searchParentId","clearCrumbs","crumbs","html","slice","methodname","callback","done","JSON","parse","fail","tmp","lastCrumb","keys","count","last","i","register"],"mappings":"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","sourcesContent":["define([\n    \"exports\",\n    \"jquery\",\n    \"core/ajax\",\n    \"core/modal_factory\",\n    \"core/modal_events\",\n    \"core/notification\",\n    \"core/modal\",\n    \"core/custom_interaction_events\",\n    \"core/modal_registry\",\n    \"core/str\",\n    \"mod_lanebs/modal_book\",\n    \"mod_lanebs/modal_book_handle\",\n    \"mod_lanebs/modal_video\",\n], function (\n    exports,\n    $,\n    ajax,\n    ModalFactory,\n    ModalEvents,\n    Notification,\n    Modal,\n    CustomEvents,\n    ModalRegistry,\n    Str,\n    ModalBook,\n    ModalBookHandler,\n    ModalVideo,\n) {\n    $.fn.serializeAssoc = function() {\n            var data = {};\n            $.each( this.serializeArray(), function( key, obj ) {\n                var a = obj.name.match(/(.*?)\\[(.*?)\\]/);\n                if(a !== null)\n                {\n                    var subName = a[1];\n                    var subKey = a[2];\n\n                    if( !data[subName] ) {\n                        data[subName] = [ ];\n                    }\n\n                    if (!subKey.length) {\n                        subKey = data[subName].length;\n                    }\n\n                    if( data[subName][subKey] ) {\n                        if( $.isArray( data[subName][subKey] ) ) {\n                            data[subName][subKey].push( obj.value );\n                        } else {\n                            data[subName][subKey] = [ ];\n                            data[subName][subKey].push( obj.value );\n                        }\n                    } else {\n                        data[subName][subKey] = obj.value;\n                    }\n                } else {\n                    if( data[obj.name] ) {\n                        if( $.isArray( data[obj.name] ) ) {\n                            data[obj.name].push( obj.value );\n                        } else {\n                            data[obj.name] = [ ];\n                            data[obj.name].push( obj.value );\n                        }\n                    } else {\n                        data[obj.name] = obj.value;\n                    }\n                }\n            });\n            return data;\n        };\n\n    let SELECTORS = {\n        SEARCH_TEXTBOX: \"[data-action='search_text']\",\n        START_SEARCH: \"[data-action='search_button']\",\n        START_SEARCH_CLEAR: \"[name='clear_search']\",\n        CANCEL_BUTTON: \"[data-action='cancel_button']\",\n        CONTENT_BLOCK: \"[data-action='content_block']\",\n        BREADCRUMBS: \".breadcrumbs p\",\n        CONTENT_NAME: \"[name='content_name']\",\n        TRIGGER_BOOK: \".trigger_book\",\n        ADD_BOOK: \"[name='add_book']\",\n        CATEGORY_BUTTON: \"[data-action='category_tree']\",\n        CATEGORY_BLOCK: \"[data-action='categories']\",\n        BOOK_PAGINATION: \"#books_pagination li.page-item\",\n        START_PAGE_CLASS: \"page-start\",\n        END_PAGE_CLASS: \"page-end\",\n        PROGRESS: \".loader\",\n        BOOK_FILTER: \".book_filter\",\n        EDU_FILTER: \".edu_filter\",\n        SEARCH_FORM: \"#search_form\"\n    };\n\n    let OUTER_SELECTORS = {\n        PAGE_NUMBER_FIELD: \"#id_page_number\",\n        NAME_FIELD: \"#id_name\",\n        CONTENT_FIELD: \"[name='content']\",\n    };\n\n    let LIMIT_ON_PAGE = 10;\n\n    /**\n     * Constructor for the Modal\n     *\n     */\n    let ModalSearch = function(root) {\n        Modal.call(this, root);\n\n        if (!this.getBody().find(SELECTORS.SEARCH_TEXTBOX).length) {\n            Str.get_string('lanebs_error_textbox', 'mod_lanebs').then(function (string) {\n                Notification.exception({message: string});\n            });\n        }\n        if (!this.getBody().find(SELECTORS.START_SEARCH).length) {\n            Str.get_string('lanebs_error_search', 'mod_lanebs').then(function (string) {\n                Notification.exception({message: string});\n            });\n        }\n    };\n\n    ModalSearch.TYPE = 'mod_lanebs-search';\n    ModalSearch.prototype = Object.create(Modal.prototype);\n    ModalSearch.prototype.constructor = ModalSearch;\n    ModalSearch.prototype.breadcrumbs = {};\n\n    ModalSearch.prototype.registerEventListeners = function () {\n        Modal.prototype.registerEventListeners.call(this);\n        let disabledEnterSubmit = function (e) {\n            if (e.keyCode === 13) {\n                submitFunction(e);\n                return false;\n            }\n        };\n        let disabledKeyUp = function (e) {\n            if (e.keyCode !== false) {\n                e.preventDefault();\n                return false;\n            }\n        };\n        let submitFunction = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            let id = $(SELECTORS.CATEGORY_BLOCK).attr('data-id');\n            let args = {\n                searchParam: $(e.target.form).serializeAssoc(),\n                page: 1,\n                limit: LIMIT_ON_PAGE,\n                catId: id\n            };\n            $(SELECTORS.PROGRESS).toggleClass('hide');\n            ModalSearch.prototype.getAjaxCall('mod_lanebs_search_books', args, ModalSearch.prototype.getSearchResult)\n                .then(function () {\n                    ModalSearch.prototype.resetPagination();\n                    $(SELECTORS.PROGRESS).toggleClass('hide');\n                });\n        };\n\n        let getCategoryTree = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            let categoryId = [null];\n            let args = {\n                categoryId: categoryId\n            };\n            ModalSearch.prototype.getAjaxCall('mod_lanebs_category_tree', args, ModalSearch.prototype.printCategories);\n        };\n\n        let setPagination = function (e) {\n            if ($(e.currentTarget).hasClass('disabled')) {\n                return true;\n            }\n            let page, maxPage;\n            if ($(SELECTORS.CONTENT_BLOCK).attr('data-page') === undefined) {\n                maxPage = 0;\n            }\n            else {\n                maxPage = parseInt($(SELECTORS.CONTENT_BLOCK).attr('data-page'));\n            }\n            if ($(e.currentTarget).hasClass(SELECTORS.START_PAGE_CLASS)) {\n                if (maxPage > 0) {\n                    page = 1;\n                }\n                else {\n                    page = 0;\n                }\n            }\n            else if ($(e.currentTarget).hasClass(SELECTORS.END_PAGE_CLASS)) {\n                page = maxPage;\n            }\n            else {\n                page = parseInt($(e.currentTarget).attr('data-page'));\n            }\n            let id = $(SELECTORS.CATEGORY_BLOCK).attr('data-id');\n            let args = {\n                searchParam: $(SELECTORS.SEARCH_FORM).serializeAssoc(),\n                page: page,\n                limit: LIMIT_ON_PAGE,\n                catId: id\n            };\n            let prevPage = $(SELECTORS.BOOK_PAGINATION).find('a.prev').closest('li.page-item');\n            let nextPage = $(SELECTORS.BOOK_PAGINATION).find('a.next').closest('li.page-item');\n            let currentPage = $(SELECTORS.BOOK_PAGINATION).find('a.active').closest('li.page-item');\n            if (page >= 2) {\n                $(prevPage).attr('data-page', page - 1);\n                $(prevPage).removeClass('disabled');\n            }\n            else if (page === 1) {\n                $(prevPage).attr('data-page', page - 1);\n                $(prevPage).addClass('disabled');\n            }\n            if (maxPage === page) {\n                $(nextPage).addClass('disabled');\n            }\n            else {\n                $(nextPage).removeClass('disabled');\n            }\n            $(nextPage).attr('data-page', page+1);\n            $(currentPage).attr('data-page', page);\n            $(currentPage).find('a.active').text(page+' '+ModalSearch.prototype.strings['lanebs_from']+' '+maxPage);\n            if (page !== 0 && maxPage !== 0) {\n                $(SELECTORS.PROGRESS).toggleClass('hide');\n                ModalSearch.prototype.getAjaxCall('mod_lanebs_search_books', args, ModalSearch.prototype.getSearchResult)\n                    .then(function () {\n                        $(SELECTORS.PROGRESS).toggleClass('hide');\n                    });\n            }\n        };\n\n        $(OUTER_SELECTORS.PAGE_NUMBER_FIELD).on('change', ModalSearch.prototype.nameFieldFill);\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.START_SEARCH, submitFunction.bind(this));\n        this.getModal().on('click', SELECTORS.START_SEARCH_CLEAR, function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            $(SELECTORS.SEARCH_TEXTBOX).val('');\n            $(SELECTORS.START_SEARCH).trigger('click');\n\n            return false;\n        });\n        this.getModal().on('keypress', SELECTORS.SEARCH_TEXTBOX, disabledEnterSubmit.bind(this));\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.BOOK_PAGINATION, setPagination.bind(this));\n        this.getModal().on('keydown', SELECTORS.CONTENT_NAME, disabledKeyUp.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.CANCEL_BUTTON, function () {\n            $(this).trigger('hide');\n        }.bind(this));\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.CATEGORY_BUTTON, getCategoryTree.bind(this));\n    };\n\n    ModalSearch.prototype.nameFieldFill = function () {\n        let id = $(OUTER_SELECTORS.CONTENT_FIELD).val();\n        let name = $(OUTER_SELECTORS.NAME_FIELD).val();\n        if (id === '' && name !== '') {\n            Notification.exception({message: ModalSearch.prototype.strings['lanebs_error_book']});\n            console.log(ModalSearch.prototype.strings['lanebs_error_book']);\n        } else {\n            let page = $(OUTER_SELECTORS.PAGE_NUMBER_FIELD).val();\n            let args = {\n                id: id,\n                page: page\n            };\n            ModalSearch.prototype.getAjaxCall('mod_lanebs_toc_name', args, function (response) {\n                let tocName = response;\n                if (tocName !== undefined) {\n                    let name = $(OUTER_SELECTORS.NAME_FIELD).val();\n                    let pg = ModalSearch.prototype.strings['lanebs_read_pg'];\n                    let regexp = '/, ' + pg + '.+/';\n                    $(OUTER_SELECTORS.NAME_FIELD).val(name.replace(regexp, '') + ', ' + pg + '.' + page + ', ' + tocName);\n                }\n            });\n        }\n    };\n\n    ModalSearch.prototype.padTo2Digits = function (num) {\n        return num.toString().padStart(2, '0');\n    }\n\n    ModalSearch.prototype.formatDate = function (date) {\n        return [\n            ModalSearch.prototype.padTo2Digits(date.getDate()),\n            ModalSearch.prototype.padTo2Digits(date.getMonth() + 1),\n            date.getFullYear(),\n        ].join('.');\n    }\n\n    ModalSearch.prototype.getSearchResult = function (response) {\n        $(SELECTORS.CONTENT_BLOCK).empty();\n        let maxPage = Math.ceil(response.body.total / LIMIT_ON_PAGE);\n        if (response.body.items.length) {\n            $.each(response.body.items, function(number, item) {\n                let descriptionBlock =\n                    '<a class=\"\" data-toggle=\"collapse\" href=\"#collapseDescription'+item.id+'\" role=\"button\">' +\n                        ModalSearch.prototype.strings['lanebs_show_desc'] +\n                    '</a>' +\n                    '<div class=\"collapse\" id=\"collapseDescription'+item.id+'\">' + item.description + '</div>';\n                if (item.description === null || item.description === '') {\n                    item.description = '';\n                    descriptionBlock = '';\n                }\n                $(SELECTORS.CONTENT_BLOCK).append(\n                    '<div class=\"item d-flex\" data-id=\"' + item.id + '\">' +\n                        '<div class=\"cover\" style=\"flex:0.2;\">' +\n                            '<img src=\"'+item.cover+'\" class=\"book_cover\" alt=\"'+ModalSearch.prototype.strings['lanebs_cover']+'\">' +\n                        '</div>' +\n                        '<div class=\"item_content\" style=\"flex:0.55;\">' +\n                            '<span class=\"book_biblio_record\">' + item.biblioRecord.replace(/00.00.0000/, ModalSearch.prototype.formatDate(new Date())) +'</span><br>' +\n                            '<span class=\"book_author hidden\">' + item.author + '</span>' +\n                            '<span class=\"book_title hidden\">' + item.title + '</span>' +\n                            descriptionBlock +\n                        '</div>' +\n                        '<div style=\"flex:0.25;\">' +\n                            '<button type=\"button\" name=\"add_book\" class=\"btn btn-sm ml-3\" style=\"color: #174c8d;' +\n                                    'background-color: white;border-color: #4285f4;\">'+ModalSearch.prototype.strings['lanebs_add']+'</button>' +\n                            '<button type=\"button\" class=\"trigger_book btn btn-sm ml-3 float-right\" style=\"color: #174c8d;' +\n                                    'background-color: white;border-color: #4285f4;\">'+ModalSearch.prototype.strings['lanebs_preshow']+'</button>'+\n                            '<br>' +\n                        '</div>' +\n                    '</div><hr style=\"margin-top:5px;\">');\n            });\n        }\n        else {\n            $(SELECTORS.CONTENT_BLOCK).append('<div class=\"item\">'+ModalSearch.prototype.strings['lanebs_error_empty_search']+'</div>');\n        }\n        $(SELECTORS.CONTENT_BLOCK).attr('data-page', maxPage);\n        $(SELECTORS.TRIGGER_BOOK).on('click', function (e) {\n            let id = $(e.target).closest('.item').attr('data-id');\n            ModalBookHandler.init(e, id);\n        });\n        $(SELECTORS.ADD_BOOK).on('click', function (e) {\n            let id = $(e.target).closest('.item').attr('data-id');\n            let contentName = $('[name=\"content_name\"]');\n            let biblioRecordField = $('[name=\"biblio_record\"]');\n            let coverField = $('[name=\"cover\"]');\n            let resourceNameField = $('#id_name');\n            let bookTitle = $(e.target).closest('.item').find('.item_content .book_title').text();\n            let bookAuthor = $(e.target).closest('.item').find('.item_content .book_author').text();\n            let bookCover = $(e.target).closest('.item').find('.book_cover').attr('src');\n            let bookBiblioRecord = $(e.target).closest('.item').find('.item_content .book_biblio_record').text();\n            resourceNameField.val(bookAuthor+' - '+bookTitle);\n            contentName.removeClass('is-invalid');\n            contentName.siblings('#id_error_content_name').text('');\n            contentName.val(bookTitle);\n            $('[name=\"content\"]').val(id);\n            biblioRecordField.val(bookBiblioRecord);\n            coverField.val(bookCover);\n            $(SELECTORS.CANCEL_BUTTON).trigger('click');\n            ModalSearch.prototype.nameFieldFill();\n            // clearing and updating video modal\n            ModalVideo.prototype.resetModal();\n            /*if (ModalVideo.prototype.getIssetVideos()) {\n\n            }*/\n        });\n    };\n\n    ModalSearch.prototype.printCategories = function (response) {\n        $(SELECTORS.CATEGORY_BLOCK).empty();\n        $.each(response.body.items, function (number, item) {\n            if (item.available === false) {\n                return false;\n            }\n            $(SELECTORS.CATEGORY_BLOCK).append(\n                '<div style=\"cursor:pointer;color:#174c8d;background-color:white;\" ' +\n                     'class=\"item btn-sm\" data-id=\"'+item.id+'\" data-expand=\"'+item.hasChild+'\" ' +\n                     'data-parent=\"'+item.parent_id+'\">' +\n                    '<span>'+item.name+'</span>' +\n                '</div>');\n\n            $(SELECTORS.CATEGORY_BLOCK).find('[data-id=\"'+item.id+'\"]').click({item: item}, function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                let id = $(e.currentTarget).attr('data-id');\n                $(SELECTORS.CATEGORY_BLOCK).attr('data-id', id);\n                ModalSearch.prototype.clearCurrentCrumb(response.body.items);\n                ModalSearch.prototype.breadcrumbs[$(this).find('span').text()] = item;\n                if (item.hasChild) {\n                    let args = {\n                        categoryId: [id]\n                    };\n                    ModalSearch.prototype.getAjaxCall('mod_lanebs_category_tree', args, ModalSearch.prototype.printCategories);\n                }\n                else {\n                    if ($(this).hasClass('bg-primary')) {\n                        $(this).removeClass('bg-primary');\n                        let parentId = $(SELECTORS.CATEGORY_BLOCK).find('.item:last').attr('data-parent');\n                        $(SELECTORS.CATEGORY_BLOCK).attr('data-id', parentId);\n                        id = parentId;\n                        ModalSearch.prototype.clearCurrentCrumb(response.body.items);\n                    }\n                    else {\n                        $(this).addClass('bg-primary');\n                        $(this).siblings().removeClass('bg-primary');\n                        $(SELECTORS.CATEGORY_BLOCK).attr('data-id', id);\n                    }\n                }\n                ModalSearch.prototype.printBreadcrumbs();\n                $(SELECTORS.START_SEARCH).trigger('click');\n            });\n        });\n\n        let parent_id = $(SELECTORS.CATEGORY_BLOCK).find('.item:last').attr('data-parent');\n\n        $(SELECTORS.CATEGORY_BLOCK).prepend(\n            '<div style=\"cursor:pointer;margin-bottom:15px;color:#174c8d;background-color:white;\" ' +\n                  'class=\"btn-sm category_back\" data-id=\"'+parent_id+'\">' +\n                '<span>'+ModalSearch.prototype.strings['lanebs_BACK']+'</span>' +\n            '</div>');\n        $(SELECTORS.CATEGORY_BLOCK).find('.category_back').on('click', function () {\n            let parent_id = $(this).attr('data-id');\n            let id = ModalSearch.prototype.searchParentId(parent_id);\n            if (id === null) {\n                id = 'null';\n            }\n            $(SELECTORS.CATEGORY_BLOCK).attr('data-id', id);\n            let args = {\n                categoryId: [id]\n            };\n            if ($(SELECTORS.CATEGORY_BLOCK).find('.item.bg-primary').length > 0) {\n                ModalSearch.prototype.clearCrumbs(2);\n            }\n            else {\n                ModalSearch.prototype.clearCrumbs(1);\n            }\n            ModalSearch.prototype.printBreadcrumbs();\n            ModalSearch.prototype.getAjaxCall('mod_lanebs_category_tree', args, ModalSearch.prototype.printCategories);\n        });\n\n    };\n\n    ModalSearch.prototype.printBreadcrumbs = function () {\n        let crumbs = ModalSearch.prototype.breadcrumbs;\n        let html = '';\n        $(SELECTORS.BREADCRUMBS).empty();\n        $.each(crumbs, function (item, number) {\n            html += '<span class=\"item\" data-id=\"'+number.id+'\">'+item+'</span> -> ';\n        });\n        html = html.slice(0, -3);\n        $(SELECTORS.BREADCRUMBS).append(html);\n    };\n\n    ModalSearch.prototype.getAjaxCall = function (methodname, args, callback) {\n        return ajax.call([\n            {\n                methodname: methodname,\n                args,\n            }\n        ])[0].then(function(response) {\n            return response;\n        }).done(function(response) {\n            callback(JSON.parse(response['body']));\n            return true;\n        }).fail(function (response) {\n            console.log(response);\n            return false;\n        });\n    };\n\n    ModalSearch.prototype.resetPagination = function () {\n        let maxPage = parseInt($(SELECTORS.CONTENT_BLOCK).attr('data-page'));\n        $(SELECTORS.BOOK_PAGINATION).find('a.prev').closest('li.page-item').addClass('disabled');\n        $(SELECTORS.BOOK_PAGINATION).find('a.prev').closest('li.page-item').attr('data-page', 0);\n        $(SELECTORS.BOOK_PAGINATION).find('a.active').closest('li.page-item').attr('data-page', 1);\n        $(SELECTORS.BOOK_PAGINATION).find('a.next').closest('li.page-item').attr('data-page', 2);\n        if (maxPage > 1) {\n            $(SELECTORS.BOOK_PAGINATION).find('a.active').text(1+' '+ModalSearch.prototype.strings['lanebs_from']+' '+maxPage);\n            $(SELECTORS.BOOK_PAGINATION).find('a.next').closest('li.page-item').removeClass('disabled');\n        }\n        else {\n            $(SELECTORS.BOOK_PAGINATION).find('a.active').text(maxPage+' '+ModalSearch.prototype.strings['lanebs_from']+' '+maxPage);\n            $(SELECTORS.BOOK_PAGINATION).find('a.next').closest('li.page-item').addClass('disabled');\n        }\n    };\n\n    ModalSearch.prototype.clearCurrentCrumb = function (data) {\n        let tmp = ModalSearch.prototype.breadcrumbs;\n        let lastCrumb = tmp[Object.keys(tmp)[Object.keys(tmp).length - 1]];\n        $.each(data, function (number, item) {\n            if (undefined !== lastCrumb) {\n                if (item.id === lastCrumb.id) {\n                    delete ModalSearch.prototype.breadcrumbs[item.name];\n                }\n            }\n        });\n    };\n\n    ModalSearch.prototype.clearCrumbs = function (count) {\n        let keys = null;\n        let last = null;\n        for (let i = 0; i < count; i++) {\n            keys = Object.keys(ModalSearch.prototype.breadcrumbs);\n            last = keys[keys.length-1];\n            delete ModalSearch.prototype.breadcrumbs[last];\n        }\n    };\n\n    ModalSearch.prototype.searchParentId = function (id) {\n        let parentId = null;\n        $.each(ModalSearch.prototype.breadcrumbs, function (number, item) {\n            if (item.id == id) {\n                parentId = item.parent_id;\n            }\n        });\n        return parentId;\n    };\n\n    ModalRegistry.register(ModalSearch.TYPE, ModalSearch, 'mod_lanebs/modal_search');\n\n    return ModalSearch;\n});"],"file":"modal_search.min.js"}