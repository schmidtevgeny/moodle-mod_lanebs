{"version":3,"file":"modal_player.min.js","sources":["../src/modal_player.js"],"sourcesContent":["import Modal from 'core/modal';\nimport $ from 'jquery';\nimport CustomEvents from 'core/custom_interaction_events';\nimport ajax from 'core/ajax';\n\nexport default class ModalPlayer extends Modal {\n    static TYPE = 'mod_lanebs/modal_player';\n    static TEMPLATE = 'mod_lanebs/modal_player';\n    static SELECTORS = {\n        CONTENT_BLOCK: '[data-action=\"player_content_block\"]',\n        CLOSE_BUTTON: '[data-action=\"close_button\"]',\n        CLOSE_CROSS: \".close\",\n        ROOT_MODAL: \"[data-region='modal-container']\",\n        PLAYER_MODAL: 'p[data-action=\"player_modal\"]',\n    };\n\n    configure(modalConfig) {\n        super.configure(modalConfig);\n        ModalPlayer.CONTENT_BLOCK = ModalPlayer.SELECTORS.CONTENT_BLOCK;\n        ModalPlayer.PLAYER_MODAL = ModalPlayer.SELECTORS.PLAYER_MODAL;\n    }\n\n    registerEventListeners() {\n        const modal = this;\n        // Call the registerEventListeners method on the parent class.\n        super.registerEventListeners();\n\n        this.getModal().on(CustomEvents.events.activate, ModalPlayer.SELECTORS.CLOSE_BUTTON, function () {\n            modal.destroy();\n        });\n\n        this.getModal().on(CustomEvents.events.scrollBottom, ModalPlayer.SELECTORS.CONTENT_BLOCK, function (e) {\n            let linkId = $(e.currentTarget).attr('data-id');\n            let iframeBlock =\n                '<iframe id=\"player_iframe\" src=\"https://www.youtube.com/embed/'+linkId+'\" title=\"YouTube video player\"' +\n                'frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"' +\n                ' allowfullscreen style=\"width:100%;height:100%;\">' +\n                '</iframe>';\n            $(ModalPlayer.SELECTORS.CONTENT_BLOCK).append(iframeBlock);\n            modal.getBody().find(ModalPlayer.SELECTORS.CONTENT_BLOCK).append(iframeBlock);\n            ajax.call([\n                {\n                    methodname: 'mod_lanebs_send_log',\n                    args: {\n                        id: linkId,\n                        type: 'video'\n                    },\n                }\n            ]);\n        });\n    }\n}\n"],"names":["ModalPlayer","Modal","configure","modalConfig","CONTENT_BLOCK","SELECTORS","PLAYER_MODAL","registerEventListeners","modal","this","getModal","on","CustomEvents","events","activate","CLOSE_BUTTON","destroy","scrollBottom","e","linkId","currentTarget","attr","iframeBlock","append","getBody","find","call","methodname","args","id","type","CLOSE_CROSS","ROOT_MODAL"],"mappings":"gsBAKqBA,oBAAoBC,eAWrCC,UAAUC,mBACAD,UAAUC,aAChBH,YAAYI,cAAgBJ,YAAYK,UAAUD,cAClDJ,YAAYM,aAAeN,YAAYK,UAAUC,aAGrDC,+BACUC,MAAQC,WAERF,8BAEDG,WAAWC,GAAGC,mCAAaC,OAAOC,SAAUd,YAAYK,UAAUU,cAAc,WACjFP,MAAMQ,kBAGLN,WAAWC,GAAGC,mCAAaC,OAAOI,aAAcjB,YAAYK,UAAUD,eAAe,SAAUc,OAC5FC,QAAS,mBAAED,EAAEE,eAAeC,KAAK,WACjCC,YACA,iEAAiEH,OAAjE,+NAIFnB,YAAYK,UAAUD,eAAemB,OAAOD,aAC9Cd,MAAMgB,UAAUC,KAAKzB,YAAYK,UAAUD,eAAemB,OAAOD,2BAC5DI,KAAK,CACN,CACIC,WAAY,sBACZC,KAAM,CACFC,GAAIV,OACJW,KAAM,oEAxCT9B,mBACH,2CADGA,uBAEC,2CAFDA,wBAGE,CACfI,cAAe,uCACfW,aAAc,+BACdgB,YAAa,SACbC,WAAY,kCACZ1B,aAAc"}