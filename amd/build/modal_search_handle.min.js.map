{"version":3,"file":"modal_search_handle.min.js","sources":["../src/modal_search_handle.js"],"sourcesContent":["import $ from 'jquery';\nimport ModalSearch from \"./modal_search\";\nimport {getStrings} from 'core/str';\nimport {getString} from 'core/str';\nimport CustomEvents from 'core/custom_interaction_events';\n\nexport const init = () => {\n    const strings = [\n        'lanebs_error_textbox',\n        'lanebs_error_search',\n        'lanebs_show_desc',\n        'lanebs_read_pg',\n        'lanebs_error_book',\n        'lanebs_cover',\n        'lanebs_add',\n        'lanebs_preshow',\n        'lanebs_error_empty_search',\n        'lanebs_BACK',\n        'lanebs_from',\n    ];\n\n    const getLangStrings = () => {\n        let names = [];\n        strings.forEach(function (value) {\n            names.push({key: value, component: 'mod_lanebs'});\n        });\n        return names;\n    };\n    const stringsTransform = (langStrings) => {\n        let resultStrings = [];\n        strings.forEach(function (value, index) {\n            resultStrings[value] = langStrings[index];\n        });\n        return resultStrings;\n    };\n    const trigger = $('#id_modal_show_button');\n    const modal = ModalSearch.create({});\n    modal.then((resolve) => {\n        const strings = getLangStrings();\n        getStrings(strings).then((strs) => {\n            ModalSearch.strings = stringsTransform({...strings, ...strs});\n        });\n        const modalRoot = resolve.getRoot();\n        $(modalRoot).find('.modal-dialog').css('max-width', '1500px');\n        $(modalRoot).find('.modal-body').css('height', '770px');\n        $(modalRoot).find('.modal-body').css('overflow-y', 'auto');\n        ModalSearch.getAjaxCall('mod_lanebs_auth', [], function (data) {\n            if (data['code'] === 403 || data['code'] === 401) {\n                getString('lanebs_auth_error', 'mod_lanebs').then((str) => {\n                    window.console.log(str);\n                });\n            }\n        });\n        $(trigger).on(CustomEvents.events.activate,() => {\n            resolve.show();\n        });\n    });\n};"],"names":["strings","getLangStrings","names","forEach","value","push","key","component","stringsTransform","langStrings","resultStrings","index","trigger","ModalSearch","create","then","resolve","strs","modalRoot","getRoot","find","css","getAjaxCall","data","str","window","console","log","on","CustomEvents","events","activate","show"],"mappings":"2hBAMoB,WACVA,QAAU,CACZ,uBACA,sBACA,mBACA,iBACA,oBACA,eACA,aACA,iBACA,4BACA,cACA,eAGEC,eAAiB,SACfC,MAAQ,UACZF,QAAQG,SAAQ,SAAUC,OACtBF,MAAMG,KAAK,CAACC,IAAKF,MAAOG,UAAW,kBAEhCL,OAELM,iBAAoBC,kBAClBC,cAAgB,UACpBV,QAAQG,SAAQ,SAAUC,MAAOO,OAC7BD,cAAcN,OAASK,YAAYE,UAEhCD,eAELE,SAAU,mBAAE,yBACJC,sBAAYC,OAAO,IAC3BC,MAAMC,gBACFhB,QAAUC,qCACLD,SAASe,MAAME,6BACVjB,QAAUQ,iBAAiB,IAAIR,WAAYiB,gBAErDC,UAAYF,QAAQG,8BACxBD,WAAWE,KAAK,iBAAiBC,IAAI,YAAa,8BAClDH,WAAWE,KAAK,eAAeC,IAAI,SAAU,6BAC7CH,WAAWE,KAAK,eAAeC,IAAI,aAAc,8BACvCC,YAAY,kBAAmB,IAAI,SAAUC,MAChC,MAAjBA,KAAI,MAAqC,MAAjBA,KAAI,yBAClB,oBAAqB,cAAcR,MAAMS,MAC/CC,OAAOC,QAAQC,IAAIH,+BAI7BZ,SAASgB,GAAGC,mCAAaC,OAAOC,UAAS,KACvCf,QAAQgB"}