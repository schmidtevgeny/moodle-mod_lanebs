{"version":3,"file":"modal_constructor_handle.min.js","sources":["../src/modal_constructor_handle.js"],"sourcesContent":["define([\"exports\", \"jquery\", \"core/modal_factory\", \"core/custom_interaction_events\", \"mod_lanebs/modal_constructor\"],\n    function (\n        exports,\n        $,\n        ModalFactory,\n        CustomEvents,\n        ModalConstructor\n    ) {\n        return {\n            init: function (base_url) {\n                let trigger = $('#lan_constructor_button');\n                ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_subscriber_token', [], function (data) {\n                    if (data['subscriber_token']) {\n                        $(trigger).attr('data-token', data['subscriber_token']);\n                    }\n                });\n                ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_service_token', [], function (data) {\n                    if (data['service_token']) {\n                        $(trigger).attr('data-service', data['service_token']);\n                    }\n                });\n                $(trigger).on('click', function(event) {\n                    console.log('constructor click');\n                    $('form.mform')[0].reset();\n                    ModalFactory.create({type: ModalConstructor.TYPE}, trigger).then(function(modal) {\n                        console.log('constructor modal create');\n                        let modalRoot = modal.getRoot();\n                        $(modalRoot).find('.modal-dialog').addClass('modal_dialog_lan_videos');\n                        modal.show();\n                        var appContainer = document.getElementById('app-container');\n                        ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_script_names', [], function (response) {\n                            let base = base_url+'/front/';\n                            appendHeadStylesheet(\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap\");\n                            appendHeadStylesheet(\"https://fonts.googleapis.com/icon?family=Material+Icons\");\n                            if (Array.isArray(response.scripts)) {\n                                $.each(response.scripts, function (key, value) {\n                                    if (value.includes('.css')) {\n                                        appendHeadStylesheet(base + value);\n                                    } else {\n                                        appendScript(appContainer,base + value);\n                                    }\n                                });\n                            } else {\n                                appendHeadStylesheet(base + \"styles.css\")\n                                appendScript(appContainer, base + \"runtime.js\")\n                                appendScript(appContainer, base + \"polyfills.js\")\n                                appendScript(appContainer, base + \"vendor.js\")\n                                appendScript(appContainer, base + \"main.js\")\n                            }\n                        });\n\n                        function appendScript(container, src) {\n                            var script = document.createElement('script');\n                            script.src = src;\n                            script.type = 'text/javascript';\n                            script.defer = true;\n                            script.async = false;\n\n                            container.appendChild(script);\n                        }\n\n                        function appendHeadStylesheet(href) {\n                            var script = document.createElement('link');\n                            script.type = 'text/css';\n                            script.rel = 'stylesheet';\n                            script.href = href;\n\n                            document.head.appendChild(script);\n                        }\n                    });\n                });\n            }\n        };\n    });"],"names":["define","exports","$","ModalFactory","CustomEvents","ModalConstructor","init","base_url","trigger","prototype","getAjaxCall","data","attr","on","event","console","log","reset","create","type","TYPE","then","modal","modalRoot","getRoot","find","addClass","show","appContainer","document","getElementById","appendScript","container","src","script","createElement","defer","async","appendChild","appendHeadStylesheet","href","rel","head","response","base","Array","isArray","scripts","each","key","value","includes"],"mappings":"AAAAA,6CAAO,CAAC,UAAW,SAAU,qBAAsB,iCAAkC,iCACjF,SACIC,QACAC,EACAC,aACAC,aACAC,kBAEA,MAAO,CACHC,KAAM,SAAUC,UACZ,IAAIC,QAAUN,EAAE,2BAChBG,iBAAiBI,UAAUC,YAAY,kCAAmC,IAAI,SAAUC,MAChFA,KAAuB,kBACvBT,EAAEM,SAASI,KAAK,aAAcD,KAAuB,qBAG7DN,iBAAiBI,UAAUC,YAAY,+BAAgC,IAAI,SAAUC,MAC7EA,KAAoB,eACpBT,EAAEM,SAASI,KAAK,eAAgBD,KAAoB,kBAG5DT,EAAEM,SAASK,GAAG,SAAS,SAASC,OAC5BC,QAAQC,IAAI,qBACZd,EAAE,cAAc,GAAGe,QACnBd,aAAae,OAAO,CAACC,KAAMd,iBAAiBe,MAAOZ,SAASa,MAAK,SAASC,OACtEP,QAAQC,IAAI,4BACZ,IAAIO,UAAYD,MAAME,UACtBtB,EAAEqB,WAAWE,KAAK,iBAAiBC,SAAS,2BAC5CJ,MAAMK,OACN,IAAIC,aAAeC,SAASC,eAAe,iBAsB3C,SAASC,aAAaC,UAAWC,KAC7B,IAAIC,OAASL,SAASM,cAAc,UACpCD,OAAOD,IAAMA,IACbC,OAAOf,KAAO,kBACde,OAAOE,OAAQ,EACfF,OAAOG,OAAQ,EAEfL,UAAUM,YAAYJ,QAG1B,SAASK,qBAAqBC,MAC1B,IAAIN,OAASL,SAASM,cAAc,QACpCD,OAAOf,KAAO,WACde,OAAOO,IAAM,aACbP,OAAOM,KAAOA,KAEdX,SAASa,KAAKJ,YAAYJ,QArC9B7B,iBAAiBI,UAAUC,YAAY,8BAA+B,IAAI,SAAUiC,UAChF,IAAIC,KAAOrC,SAAS,UACpBgC,qBAAqB,qFACrBA,qBAAqB,2DACjBM,MAAMC,QAAQH,SAASI,SACvB7C,EAAE8C,KAAKL,SAASI,SAAS,SAAUE,IAAKC,OAChCA,MAAMC,SAAS,QACfZ,qBAAqBK,KAAOM,OAE5BnB,aAAaH,aAAagB,KAAOM,WAIzCX,qBAAqBK,KAAO,cAC5Bb,aAAaH,aAAcgB,KAAO,cAClCb,aAAaH,aAAcgB,KAAO,gBAClCb,aAAaH,aAAcgB,KAAO,aAClCb,aAAaH,aAAcgB,KAAO,sBA0B9D"}