{"version":3,"file":"modal_constructor_handle.min.js","sources":["../src/modal_constructor_handle.js"],"sourcesContent":["import $ from 'jquery';\nimport CustomEvents from 'core/custom_interaction_events';\nimport ModalConstructor from \"./modal_constructor\";\n\nexport const init = (base_url) => {\n    let trigger = $('#lan_constructor_button');\n    ModalConstructor.getAjaxCall('mod_lanebs_get_subscriber_token', [], function (data) {\n        if (data['subscriber_token']) {\n            $(trigger).attr('data-token', data['subscriber_token']);\n        }\n    });\n    ModalConstructor.getAjaxCall('mod_lanebs_get_service_token', [], function (data) {\n        if (data['service_token']) {\n            $(trigger).attr('data-service', data['service_token']);\n        }\n    });\n    $(trigger).on(CustomEvents.events.activate, function() {\n        $('form.mform')[0].reset();\n        const modal = ModalConstructor.create({});\n        modal.then(function (resolve) {\n            const modalRoot = resolve.getRoot();\n            $(modalRoot).find('.modal-dialog').addClass('modal_dialog_lan_videos');\n            ModalConstructor.getAjaxCall('mod_lanebs_get_script_names', [], function (response) {\n                const appContainer = document.getElementById('app-container');\n                const base = base_url+'/front/';\n                ModalConstructor.appendHeadStylesheet(\n                    \"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap\"\n                );\n                ModalConstructor.appendHeadStylesheet(\"https://fonts.googleapis.com/icon?family=Material+Icons\");\n                if (Array.isArray(response.scripts)) {\n                    $.each(response.scripts, function (key, value) {\n                        if (value.includes('.css')) {\n                            ModalConstructor.appendHeadStylesheet(base + value);\n                        } else {\n                            ModalConstructor.appendScript(appContainer,base + value);\n                        }\n                    });\n                } else {\n                    ModalConstructor.appendHeadStylesheet(base + \"styles.css\");\n                    ModalConstructor.appendScript(appContainer, base + \"runtime.js\");\n                    ModalConstructor.appendScript(appContainer, base + \"polyfills.js\");\n                    ModalConstructor.appendScript(appContainer, base + \"vendor.js\");\n                    ModalConstructor.appendScript(appContainer, base + \"main.js\");\n                }\n            });\n            resolve.show();\n        });\n    });\n};"],"names":["base_url","trigger","getAjaxCall","data","attr","on","CustomEvents","events","activate","reset","ModalConstructor","create","then","resolve","modalRoot","getRoot","find","addClass","response","appContainer","document","getElementById","base","appendHeadStylesheet","Array","isArray","scripts","each","key","value","includes","appendScript","show"],"mappings":"oiBAIqBA,eACbC,SAAU,mBAAE,sDACCC,YAAY,kCAAmC,IAAI,SAAUC,MACtEA,KAAI,sCACFF,SAASG,KAAK,aAAcD,KAAI,gDAGzBD,YAAY,+BAAgC,IAAI,SAAUC,MACnEA,KAAI,mCACFF,SAASG,KAAK,eAAgBD,KAAI,sCAG1CF,SAASI,GAAGC,mCAAaC,OAAOC,UAAU,+BACtC,cAAc,GAAGC,QACLC,2BAAiBC,OAAO,IAChCC,MAAK,SAAUC,eACXC,UAAYD,QAAQE,8BACxBD,WAAWE,KAAK,iBAAiBC,SAAS,sDAC3Bf,YAAY,8BAA+B,IAAI,SAAUgB,gBAChEC,aAAeC,SAASC,eAAe,iBACvCC,KAAOtB,SAAS,qCACLuB,qBACb,gHAEaA,qBAAqB,2DAClCC,MAAMC,QAAQP,SAASQ,yBACrBC,KAAKT,SAASQ,SAAS,SAAUE,IAAKC,OAChCA,MAAMC,SAAS,mCACEP,qBAAqBD,KAAOO,kCAE5BE,aAAaZ,aAAaG,KAAOO,sCAIzCN,qBAAqBD,KAAO,yCAC5BS,aAAaZ,aAAcG,KAAO,yCAClCS,aAAaZ,aAAcG,KAAO,2CAClCS,aAAaZ,aAAcG,KAAO,wCAClCS,aAAaZ,aAAcG,KAAO,eAG3DT,QAAQmB"}