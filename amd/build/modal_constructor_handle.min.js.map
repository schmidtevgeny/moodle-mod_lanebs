{"version":3,"sources":["../src/modal_constructor_handle.js"],"names":["define","exports","$","ModalFactory","CustomEvents","ModalConstructor","init","trigger","prototype","getAjaxCall","data","attr","on","events","activate","create","type","TYPE","then","modal","modalRoot","getRoot","find","addClass","show","console","log","appContainer","document","getElementById","response","appendHeadStylesheet","Array","isArray","scripts","each","key","value","includes","appendScript","container","src","script","createElement","appendChild","href","rel","head"],"mappings":"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","sourcesContent":["define([\"exports\", \"jquery\", \"core/modal_factory\", \"core/custom_interaction_events\", \"mod_lanebs/modal_constructor\"],\n    function (\n        exports,\n        $,\n        ModalFactory,\n        CustomEvents,\n        ModalConstructor\n    ) {\n        return {\n            init: function (e) {\n                let trigger = $('#lan_constructor_button');\n                ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_subscriber_token', [], function (data) {\n                    if (data['subscriber_token']) {\n                        $(trigger).attr('data-token', data['subscriber_token']);\n                    }\n                });\n                ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_service_token', [], function (data) {\n                    if (data['service_token']) {\n                        $(trigger).attr('data-service', data['service_token']);\n                    }\n                });\n                $(trigger).on(CustomEvents.events.activate, function(event) {\n                    ModalFactory.create({type: ModalConstructor.TYPE}, trigger).then(function(modal) {\n                        let modalRoot = modal.getRoot();\n                        $(modalRoot).find('.modal-dialog').addClass('modal_dialog_lan_videos');\n                        modal.show();\n                        console.log(\"Hi there!\");\n                        var appContainer = document.getElementById('app-container');\n\n                        ModalConstructor.prototype.getAjaxCall('mod_lanebs_get_script_names', [], function (response) {\n                            let base = 'https://c.lanbook.com/front/';\n                            //let base = 'https://c.stage.lanbook.com/front/';\n                            appendHeadStylesheet(\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap\");\n                            appendHeadStylesheet(\"https://fonts.googleapis.com/icon?family=Material+Icons\");\n                            if (Array.isArray(response.scripts)) {\n                                $.each(response.scripts, function (key, value) {\n                                    if (value.includes('.css')) {\n                                        appendHeadStylesheet(base + value);\n                                    } else {\n                                        appendScript(appContainer,base + value);\n                                    }\n                                });\n                            } else {\n                                appendHeadStylesheet(base + \"styles.css\")\n                                appendScript(appContainer, base + \"runtime.js\")\n                                appendScript(appContainer, base + \"polyfills.js\")\n                                appendScript(appContainer, base + \"vendor.js\")\n                                appendScript(appContainer, base + \"main.js\")\n                            }\n                        });\n\n                        function appendScript(container, src) {\n                            var script = document.createElement('script');\n                            script.src = src;\n                            script.type = 'text/javascript';\n\n                            container.appendChild(script);\n                        }\n\n                        function appendHeadStylesheet(href) {\n                            var script = document.createElement('link');\n                            script.type = 'text/css';\n                            script.rel = 'stylesheet';\n                            script.href = href;\n\n                            document.head.appendChild(script);\n                        }\n                    });\n                });\n            }\n        };\n    });"],"file":"modal_constructor_handle.min.js"}