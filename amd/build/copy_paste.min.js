define("mod_lanebs/copy_paste",["exports","jquery","core/ajax","core/str"],(function(_exports,_jquery,_ajax,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax);_exports.init=()=>{let SELECTORS_PASTE_BUTTON="#id_paste_mod",SELECTORS_COPY_BUTTON="#id_copy_mod",SELECTORS_NAME_FIELD="#id_name",SELECTORS_CONTENT_FIELD='[name="content"]',SELECTORS_COVER_FIELD='[name="cover"]',SELECTORS_BIBLIO_RECORD_FIELD='[name="biblio_record"]',SELECTORS_DESCRIPTION_EDITOR_FIELD="#id_introeditoreditable",SELECTORS_DESCRIPTION_TEXTFIELD="#id_introeditor",SELECTORS_CONTENT_NAME_FIELD="#id_content_name",SELECTORS_PAGE_NUMBER_FIELD="#id_page_number",SELECTORS_VISIBLE_SELECT="#id_visible";localStorage.getItem("lanebs_mod")||(0,_jquery.default)(SELECTORS_PASTE_BUTTON).addClass("hidden"),(0,_jquery.default)(SELECTORS_COPY_BUTTON).on("click",(function(){(0,_jquery.default)(SELECTORS_PASTE_BUTTON).removeClass("hidden");let query=window.location.search,modId=new URLSearchParams(query).get("update");modId||(0,_str.getString)("lanebs_copy_attention","mod_lanebs").then((function(str){alert(str)})),localStorage.setItem("lanebs_mod",modId)})),(0,_jquery.default)(SELECTORS_PASTE_BUTTON).on("click",(function(){let id=parseInt(localStorage.getItem("lanebs_mod"));if(id){let args={id:id};_ajax.default.call([{methodname:"mod_lanebs_lanebs_info",args:args}])[0].then((function(response){return response})).done((function(response){let info=JSON.parse(response.body);return(0,_jquery.default)(SELECTORS_BIBLIO_RECORD_FIELD).val(info.biblio_record),(0,_jquery.default)(SELECTORS_COVER_FIELD).val(info.cover),(0,_jquery.default)(SELECTORS_NAME_FIELD).val(info.name),(0,_jquery.default)(SELECTORS_CONTENT_NAME_FIELD).val(info.content_name),(0,_jquery.default)(SELECTORS_DESCRIPTION_EDITOR_FIELD).text(info.intro),(0,_jquery.default)(SELECTORS_DESCRIPTION_TEXTFIELD).val(info.intro),(0,_jquery.default)(SELECTORS_PAGE_NUMBER_FIELD).val(info.page_number),(0,_jquery.default)(SELECTORS_CONTENT_FIELD).val(info.content),(0,_jquery.default)(SELECTORS_VISIBLE_SELECT).val(info.visible),response})).fail((function(response){return alert(response),response}))}else(0,_str.getString)("lanebs_copy_error","mod_lanebs").then((function(str){alert.log(str)}))}))}}));

//# sourceMappingURL=copy_paste.min.js.map