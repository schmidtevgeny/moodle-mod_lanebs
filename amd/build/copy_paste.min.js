define("mod_lanebs/copy_paste",["exports","jquery","core/ajax","core/str"],(function(exports,$,ajax,Str){return{init:function(title){let SELECTORS_PASTE_BUTTON="#id_paste_mod",SELECTORS_COPY_BUTTON="#id_copy_mod",SELECTORS_NAME_FIELD="#id_name",SELECTORS_CONTENT_FIELD='[name="content"]',SELECTORS_COVER_FIELD='[name="cover"]',SELECTORS_BIBLIO_RECORD_FIELD='[name="biblio_record"]',SELECTORS_DESCRIPTION_EDITOR_FIELD="#id_introeditoreditable",SELECTORS_DESCRIPTION_TEXTFIELD="#id_introeditor",SELECTORS_CONTENT_NAME_FIELD="#id_content_name",SELECTORS_PAGE_NUMBER_FIELD="#id_page_number",SELECTORS_VISIBLE_SELECT="#id_visible";localStorage.getItem("lanebs_mod")||$(SELECTORS_PASTE_BUTTON).addClass("hidden"),$(SELECTORS_COPY_BUTTON).on("click",(function(e){$(SELECTORS_PASTE_BUTTON).removeClass("hidden");let query=window.location.search,modId=new URLSearchParams(query).get("update");modId||Str.get_string("lanebs_copy_attention","mod_lanebs").done((function(str){console.log(str)})),localStorage.setItem("lanebs_mod",modId)})),$(SELECTORS_PASTE_BUTTON).on("click",(function(e){let id=parseInt(localStorage.getItem("lanebs_mod"));if(id){let args={id:id};ajax.call([{methodname:"mod_lanebs_lanebs_info",args:args}])[0].then((function(response){return response})).done((function(response){let info=JSON.parse(response.body);return $(SELECTORS_BIBLIO_RECORD_FIELD).val(info.biblio_record),$(SELECTORS_COVER_FIELD).val(info.cover),$(SELECTORS_NAME_FIELD).val(info.name),$(SELECTORS_CONTENT_NAME_FIELD).val(info.content_name),$(SELECTORS_DESCRIPTION_EDITOR_FIELD).text(info.intro),$(SELECTORS_DESCRIPTION_TEXTFIELD).val(info.intro),$(SELECTORS_PAGE_NUMBER_FIELD).val(info.page_number),$(SELECTORS_CONTENT_FIELD).val(info.content),$(SELECTORS_VISIBLE_SELECT).val(info.visible),response})).fail((function(response){return console.log(response),!1}))}else Str.get_string("lanebs_copy_error","mod_lanebs").done((function(str){console.log(str)}))}))}}}));

//# sourceMappingURL=copy_paste.min.js.map