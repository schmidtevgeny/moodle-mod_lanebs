{"version":3,"sources":["../src/copy_paste.js"],"names":["define","exports","$","ajax","Str","init","SELECTORS","PASTE_BUTTON","COPY_BUTTON","NAME_FIELD","CONTENT_FIELD","COVER_FIELD","BIBLIO_RECORD_FIELD","DESCRIPTION_EDITOR_FIELD","DESCRIPTION_TEXTFIELD","CONTENT_NAME_FIELD","PAGE_NUMBER_FIELD","VISIBLE_SELECT","IDNUMBER_FIELD","issetStorage","localStorage","getItem","addClass","on","removeClass","query","window","location","search","urlParams","URLSearchParams","modId","get","get_string","done","str","console","log","setItem","id","parseInt","call","methodname","args","then","response","info","JSON","parse","body","val","biblio_record","cover","name","content_name","text","intro","page_number","content","visible","fail"],"mappings":"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","sourcesContent":["define([\"exports\", \"jquery\", \"core/ajax\", \"core/str\"],\n    function (exports, $, ajax, Str) {\n        return {\n            init: function(title) {\n                let STORAGE_ID = 'lanebs_mod';\n                let SELECTORS = {\n                    PASTE_BUTTON: '#id_paste_mod',\n                    COPY_BUTTON: '#id_copy_mod',\n                    NAME_FIELD: '#id_name',\n                    CONTENT_FIELD: '[name=\"content\"]',\n                    COVER_FIELD: '[name=\"cover\"]',\n                    BIBLIO_RECORD_FIELD: '[name=\"biblio_record\"]',\n                    DESCRIPTION_EDITOR_FIELD: '#id_introeditoreditable',\n                    DESCRIPTION_TEXTFIELD: '#id_introeditor',\n                    CONTENT_NAME_FIELD: '#id_content_name',\n                    PAGE_NUMBER_FIELD: '#id_page_number',\n                    VISIBLE_SELECT: '#id_visible',\n                    IDNUMBER_FIELD: '#id_cmidnumber',\n                };\n                let issetStorage = localStorage.getItem(STORAGE_ID);\n                if (!issetStorage) {\n                    $(SELECTORS.PASTE_BUTTON).addClass('hidden');\n                }\n                $(SELECTORS.COPY_BUTTON).on('click', function(e) {\n                    $(SELECTORS.PASTE_BUTTON).removeClass('hidden');\n                    let query = window.location.search;\n                    let urlParams = new URLSearchParams(query);\n                    let modId = urlParams.get('update');\n                    if (!modId) {\n                        Str.get_string('lanebs_copy_attention', 'mod_lanebs').\n                        done(function (str) {\n                            console.log(str);\n                        });\n                    }\n                    localStorage.setItem('lanebs_mod', modId);\n                });\n                $(SELECTORS.PASTE_BUTTON).on('click', function (e) {\n                    let id = parseInt(localStorage.getItem(STORAGE_ID));\n                    if (!id) {\n                        Str.get_string('lanebs_copy_error', 'mod_lanebs').\n                        done(function (str) {\n                            console.log(str);\n                        });\n                    } else {\n                        let args = {\n                            'id': id\n                        };\n                        ajax.call([\n                            {\n                                methodname: 'mod_lanebs_lanebs_info',\n                                args,\n                            }\n                        ])[0].then(function(response) {\n                            return response;\n                        }).done(function(response) {\n                            let info = JSON.parse(response.body);\n                            $(SELECTORS.BIBLIO_RECORD_FIELD).val(info.biblio_record);\n                            $(SELECTORS.COVER_FIELD).val(info.cover);\n                            $(SELECTORS.NAME_FIELD).val(info.name);\n                            $(SELECTORS.CONTENT_NAME_FIELD).val(info.content_name);\n                            $(SELECTORS.DESCRIPTION_EDITOR_FIELD).text(info.intro);\n                            $(SELECTORS.DESCRIPTION_TEXTFIELD).val(info.intro);\n                            $(SELECTORS.PAGE_NUMBER_FIELD).val(info.page_number);\n                            $(SELECTORS.CONTENT_FIELD).val(info.content);\n                            $(SELECTORS.VISIBLE_SELECT).val(info.visible);\n                            return response;\n                        }).fail(function (response) {\n                            console.log(response);\n                            return false;\n                        });\n                    }\n                });\n            },\n        };\n    });"],"file":"copy_paste.min.js"}